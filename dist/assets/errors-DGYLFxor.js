function u(e){const o=[];return e.username||o.push("กรุณากรอกชื่อผู้ใช้"),e.password||o.push("กรุณากรอกรหัสผ่าน"),{isValid:o.length===0,errors:o}}function S(e){const o=[];e.username||o.push("กรุณากรอกชื่อผู้ใช้"),e.password||o.push("กรุณากรอกรหัสผ่าน"),e.confirmPassword||o.push("กรุณายืนยันรหัสผ่าน"),e.password!==e.confirmPassword&&o.push("รหัสผ่านไม่ตรงกัน"),e.fullName||o.push("กรุณากรอกชื่อ-นามสกุล"),e.phone||o.push("กรุณากรอกเบอร์โทรศัพท์"),e.email||o.push("กรุณากรอกอีเมล");const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email&&!s.test(e.email)&&o.push("รูปแบบอีเมลไม่ถูกต้อง"),{isValid:o.length===0,errors:o}}function p(e){return new Promise((o,s)=>{if(!window.GOOGLE_SCRIPT_URL){console.error("Google Script URL is not defined. Current window object:",window),s(new Error("Google Script URL ไม่ได้ถูกกำหนดไว้"));return}let r;try{r=new URL(window.GOOGLE_SCRIPT_URL)}catch{console.error("Invalid Google Script URL format:",window.GOOGLE_SCRIPT_URL),s(new Error("Google Script URL มีรูปแบบไม่ถูกต้อง"));return}console.log("Sending POST request to Google Apps Script:",{url:r.toString(),data:e});let n,i;const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};typeof AbortController<"u"&&(n=new AbortController,c.signal=n.signal,i=setTimeout(()=>{n.abort()},3e4)),fetch(r.toString(),c).then(t=>{if(console.log("Received response from Google Apps Script:",{status:t.status,statusText:t.statusText,headers:[...t.headers.entries()]}),i&&clearTimeout(i),!t.ok)throw t.status===0?new Error("CORS หรือการเชื่อมต่อเครือข่ายมีปัญหา โปรดตรวจสอบการตั้งค่า CORS บน Google Apps Script"):new Error(`HTTP error! status: ${t.status}`);return t.json()}).then(t=>{console.log("Parsed JSON response from Google Apps Script:",t),o(t)}).catch(t=>{console.error("Error connecting to Google Apps Script:",t),i&&clearTimeout(i);let l="ไม่สามารถเชื่อมต่อกับ Google Apps Script ได้";t.name==="AbortError"?l="การเชื่อมต่อกับ Google Apps Script หมดเวลา":t.message&&t.message.includes("CORS")?l="เกิดปัญหาเกี่ยวกับ CORS ในการเชื่อมต่อกับ Google Apps Script":t.message&&(l=`ไม่สามารถเชื่อมต่อกับ Google Apps Script ได้: ${t.message}`),s(new Error(l))})})}async function R(e,o=3){for(let s=1;s<=o;s++)try{return console.log(`Attempt ${s} to connect to Google Sheets`),await p(e)}catch(r){if(console.warn(`Attempt ${s} failed:`,r.message),s===o)throw r;await new Promise(n=>setTimeout(n,500))}}const a={NETWORK_ERROR:"ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้",TIMEOUT_ERROR:"การเชื่อมต่อหมดเวลา กรุณาลองใหม่อีกครั้ง",LOGIN_FAILED:"ข้อมูลการเข้าสู่ระบบไม่ถูกต้อง",REGISTER_FAILED:"ไม่สามารถสมัครสมาชิกได้ กรุณาลองใหม่อีกครั้ง",MISSING_FORM_ELEMENTS:"ไม่พบองค์ประกอบฟอร์มที่จำเป็น",MISSING_INPUT:"กรุณากรอกข้อมูลให้ครบ",PASSWORD_MISMATCH:"รหัสผ่านไม่ตรงกัน"},f={CONNECTION_FAILED:"ไม่สามารถเชื่อมต่อได้",TIMEOUT:"การเชื่อมต่อใช้เวลานานเกินไป",LOGIN_ERROR:"เข้าสู่ระบบไม่สำเร็จ",REGISTER_ERROR:"สมัครสมาชิกไม่สำเร็จ"};export{a as E,f as a,S as b,R as s,u as v};
